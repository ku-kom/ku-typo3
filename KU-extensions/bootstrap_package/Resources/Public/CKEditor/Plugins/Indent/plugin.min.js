"use strict";!function(){function t(e){var t=e.getSelection(),n=t&&t.getRanges()[0];if(n){for(var a,r=t.createBookmarks(!1)[0],o=r.startNode,s=r.endNode||o,l=n.createIterator(),n=e.editable(),i=[];a=l.getNextParagraph();)i.push(a);if(e.getCommand("bootstrappackage_indent").state==CKEDITOR.TRISTATE_OFF){var d=e,u=i,g=(u=function(e,t){var n=null,a=null,r=[];for(;0<t.length;){for(a=t.shift();!a.getParent().equals(e);)a=a.getParent();a.equals(n)||(r.push(a),n=a)}return r}(function(e){for(var t=e[0].getParent(),n=null,a=0;a<e.length;a++)n=e[a],t=t.getCommonAncestor(n.getParent());var r={table:1,tbody:1,tr:1,ol:1,ul:1};for(;r[t.getName()];)t=t.getParent();return t}(u),u),u=function(e,t){var n=null,a=[];for(;0<t.length;)if("div"==(n=t.shift()).getName()&&n.hasClass("text-indent")){for(var r=new CKEDITOR.dom.documentFragment(e.document);n.getFirst();)r.append(n.getFirst().remove()),a.push(r.getLast());r.replace(n)}else a.push(n);return a}(d,u),u),c=d.document.createElement("div"),f=null;for(c.addClass("text-indent"),c.insertBefore(g[0]);0<g.length;)f=g.shift(),c.append(f)}else for(var m=function(e){for(var t={},n=[],a=[],r=null,o=null,s=0;s<e.length;s++){r=e[s];var o=null,l=null;if("div"==r.getName()&&r.hasClass("text-indent")&&v(r))n.push(r);else{for(;r.getParent();){if("div"==r.getParent().getName()&&r.getParent().hasClass("text-indent")){o=r.getParent(),l=r;break}r=r.getParent()}o&&l&&!l.getCustomData("move")&&(a.push(l),CKEDITOR.dom.element.setMarker(t,l,"move",!0))}}CKEDITOR.dom.element.clearAllMarkers(t);for(;0<a.length;)r=a.shift(),o=r.getParent(),r.getPrevious()?r.getNext()?(r.breakParent(r.getParent()),n.push(r.getNext())):r.remove().insertAfter(o):r.remove().insertBefore(o),o.getCustomData("processed")||(n.push(o),CKEDITOR.dom.element.setMarker(t,o,"processed",!0));return CKEDITOR.dom.element.clearAllMarkers(t),n}(i),p=null,h=m.length-1;0<=h;h--)v(p=m[h])&&p.remove();n.contains(o)&&n.contains(s)&&t.selectBookmarks([r]),e.focus()}}function n(e,t){t=t.block||t.blockLimit,e=e.elementPath(t).contains(function(e){if(e.is("div")&&e.hasClass("text-indent"))return!0},1);this.setState(e?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)}function v(e){for(var t,n=0,a=e.getChildCount();n<a&&(t=e.getChild(n));n++)if(t.type==CKEDITOR.NODE_ELEMENT&&t.isBlockBoundary())return;return 1}CKEDITOR.plugins.add("bootstrappackage_indent",{lang:"en,de",icons:"bootstrappackage_indent",hidpi:!0,init:function(e){e.blockless||(e.addCommand("bootstrappackage_indent",{exec:t,refresh:n,context:"div(text-indent)",allowedContent:"div(!text-indent)",requiredContent:"div(!text-indent)"}),e.ui.addButton&&e.ui.addButton("bootstrappackage_indent",{label:e.lang.bootstrappackage_indent.toolbar,command:"bootstrappackage_indent",toolbar:"blocks"}))}})}();